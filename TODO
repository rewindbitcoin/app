DO THIS NOW! run the backup and write the seed in hermes

Complete the FIXME: before publication.

* Escribir DM Sergi de Abast:
* https://x.com/abogadocripto
 
* En Español

* Modo watch-only, Modo Hardware Wallet.
*   https://www.youtube.com/watch?v=f-8elm8xCLs
*     -> Usa Blue wallet. Copiar idea.
*   https://www.reddit.com/r/Bitcoin/comments/zudpbo/using_old_phone_as_cold_wallet/
* Usar un movil viejo con Rewind Bitcoin.
*   --> Sin necesidad de conexión a Internet.

* Publicar
*   -> Tests

*   Video

* Pedir beca

* Alvaro d maria

* Hacer q se vea bien teléfono con fuentes grandes como el de mi padre.


- I have some FIXME: in the code for tests. Get rid of them before publishing:
- Español
- Reducir el tiempo. Default 3 dias.
- Reducir cantidad mínima. Ver como aplicar el fee.
    -> PRESIGNED_FEE_RATE_CEILING
    -> MIN_RECOVERABLE_RATIO
    -> FIXME: change the code in rescue and in the rescue part of the app.
    -> Also on the unvault. can it be the case it'¡s not recoverable. than what happens.
    In fact this can already happen if fees >> 10000 sat/vbyte
- Tests
- Publicar App

Publicar Web

Permitir vaults de cantidades mas pequeñas. Omitir mi comisión en caso de vaults muy peques.
  -> Y si mi comi es proporcional a la fee pagada al minero?

Primera screen de aceptar condiciones y warning de aceptacion de riesgos


Mas adelante -> Subir de nuevo las comis a 0.95 % (lo q tienen bit2me o $299/once!)


----
Crear un curso de Bitcoin. Ideal si fuese versión web.
Donde pasas a tener más "Badges". Idealmente on web.
A medida q vas añadiendo "crear un reto", "delegar", "simulacros de ataque"...

Crear un "how prepared you are?" - socializarlo

Lo mismo con los "backups"


---

Reducir las fees a medida q compartan más la app.

---

---

juegos con la red tape!
  -> Compartir ficheros de delegación. Ver si la gente cancela una tx.

---

Con rankings?
----


TODO: Change Thefr-protection timelock to Theft-Protection Countdown???

Bit2Me cobra 0.95% comisión brokerage
-> 2020 2M€ facturacion
-> 2021 13M€ facturacion
Bit2Me Capital

Bit2Me pilló mucho cliente a través de educación

TODO: Cannot Hide Rescued Vault
  -> Yeahy, but needs 3 blocks

TODO: I got again one of these errors:
https://github.com/Rapsssito/react-native-tcp-socket/issues/197
In  TcpSockers.m there still are a couple of lines where assigning socker and then not checking nil! 
FIX ALL THOSE!
GCDAsyncSocket *socket = [server getSocket];
  -> CHECK WHY THIS ONE WAS NEVER MERGED!!!
  https://github.com/Rapsssito/react-native-tcp-socket/pull/172/files

TODO: Same as netStatusUpdate does not update while on the background same
should be done in useTipStatus / useFeeEstimates / useBtcFiat


TODO: Si quieres tener más Beta testers, en la web de Stacker News puedes compartir la info del proyecto y tendrás gente experta y novata dándote feed back. Te dejo por aquí una invitación: https://stacker.news/r/criptopanas   Es como un reddit, pero pagas en SAst por postear y en vez de likes recibes SATS.

TODO: Cuando se hace refresh de discovery.fetch la app es un responsive

TODO: web forma para contactar

TODO: what happens if someone enters a taproot address? this crashes? what?
better reject it!

TODO: Get the trademark: Super Important !!!

TODO: Make sure the addresses being generated are the new ones

TODO: glitch sending coins twice. Investigate.

TODO: Ojo q la lozalicacion edsta mal porque ahora me intenterá meter el español!!!
  -> FIXME: Poner en i18next (se puede, ver como ) los fallbacks para catalan y gallego a español...

TODO: La web de rewind deberia usar url dinamica para Rescue (services.env)

TODO: hacer web - tape + rescue
  -> cambiar fondo de pantalla para q sea Commun
    -> pero un blau que li queda millor de contrast si et cal) (no estic 100% convençut es): 00539fff

TODO: Wallets:
  TODO: set the initial accept terms


TODO: weird, regtest block 150 halving is produced in regtest!!! FUCK!!
  -> I need to create a fork of @bitcoinerlab/tester -> @rewindbitcoin/tape-services - DONE
  -> The fork must compiler bitcoind, also compile stuff only for x86
  -> Then apply a simplified version of this patch: https://github.com/bitcoin/bitcoin/pull/8623
  -> Then generate 20000 blocks (1 million bitcoins) on load.

TODO: create a fakeTapeFees server and dont use an electrum server for this

TODO: investigate why electrum becomes unresponsive at times.

TODO: the toasts style is so ugly!

TODO: generate new set of service address prive keys and save somewehere mega safe.

TODO: dont show electrum connecting issues with mainnet electrum when using Tape
fucking blockstream! or better find oyu ewhats the connection problem for when
users using testnet or mainnet!

TODO: un catch global DE PROMISES!!! FIXME en ErrorBoundary.tsx

TODO: abadon abandon... en testnet no me deja hacer nada (niungun click en nada)
mientras está cargando

TODO: Check if web camera QR detection works after i updated versions. See AddressInput

TODO: there is an error sending funds to self address
  MUST update @bitcoinerlab/discovery and PUSH and NPM PUBLISH

Also include a button for dismissing I have secured my wallet seed (and don't prompt it on start)
  -> Then change the Skip to "Later"

TODO: recibiré críticas por estar usando utxos que nunca se aceptarán

TODO: puedo poner 0 días (pero no se ve que son bloques), por tanto, estando en días,
 no permitir 0 días.

TODO: decidir q hacer con las fees (display + app stores)

TODO: cambiar esplora http a wss -> https://github.com/Blockstream/esplora/issues/428
  -> actualizar @bitcoinerlab/explorer
  -> Usar este cliente: https://github.com/keep-network/electrum-client-js

TODO: Si dejo la wallet varias horas en el simulador sin tocar, luego no 
hace sync y da netReady = undefined.
  Ahora lo tengo en:
   LOG  TRACE sync {"isUserTriggered": false, "networkId": "TAPE", "updatedNetReady": true, "walletId": 28}
   LOG  TRACE sync proceeding
   Y se ha quedado así de forma indefinida...

TODO: Todo en CreateVaultScreen para formatear bien con i18n el preview de las fees estimadas.

TODO: the links in Vaults.tsx and History.tsx appear larger than the texts in web.

TODO: Cuando se hace refresco (no manual) entonces en iOS no hacer q me salga el
refresh porque me cambia toda la UI....

TODO: Ojo! En las explicaciones, cuando se habla de timelocks parecen absolutos; decir
siempre que son relativos.

TODO: i cannot dismiss toasts in iOS in the Creating Vault window... (the native modal)
  -> Add a close button - also polish styles in toats...

TODO: en Confirmation poner un resumen.

TODO: LOCK-TIME mes espai sobre amunt, mes gran?

TODO: Transactions -> History


https://basecamp.com/shapeup/0.3-chapter-01

Re-branding:
  - storm.thunderden.com -> tape.rewindbitcoin.com
  - Safe Address -> Rewind Address
  - Record - Community backups


goat oak pull
seek know resemble
hurt pistol head
first board better


OJO!!! el patch de react-native-toast-notifications solo se aplica al src!!!

f (balance > 0.01 BTC) promptBackupFlow()
This one line of code is like “nooo you are endangering user security not following the standard with exotic solutions, nooo”

unfreezing icon... ? https://icons.expo.fyi/Index/MaterialCommunityIcons/progress-clock

En Settings tendré que usa el código este: 
import { shareVaults } from '../lib/backup';
  const onRequestVaultsBackup = useCallback(() => {
    if (!vaults) throw new Error('vaults not ready');
    return shareVaults({ vaults });
  }, [vaults]);

In Settings add: [show confirmed balances & use confirmed utxos] / [show unconfirmed balances & use unconfirmed utxos]
  -> Then adapt the whole App to make sense with proper Confirming... messages (pending balance add/substract of XXX) for both cases...

I should add a super warning when the Fee selected by the user is bad (not enoguh - since i allow 1 sat/vbyte...).

TODO: - show a Confirming... below the Available/Frozen Balance.

En una insgatlacion nueva en Android me salta un error de nativewind tras hacer el vault ?¿?ç¿?¿?

Swap el orden de Create <-> Create en Vault SetUp

Lo de MAX_VAULT_CHECKS es cutre no???

Probar craer Vault en Android, ahore me casca

Add a help icon also on the FeeInput. This is so that newbies get a hint about this
think what happens if a help Modal is open in the InitUnfreeze fee selection, modal within modal works? ios/web/android?


Si alguien me lanza una tx con poca fee, entonces las utxos que estan en
el mempool no me las dejará elegir nunca, no? Debería poder cambiar el modo
en settings. [x | v] Create txs with unconfirmed utxos.
  ESTO ES DE VITAL IMPORTANCIA
  ESTO ES DE VITAL IMPORTANCIA
  ESTO ES DE VITAL IMPORTANCIA
  

Cuando se hace un set de las fees entonces el modal de InitTrigger me desactiva
el Keyboard si lo estoy editando (eso pasa cada minuto o así).

En la Creación de Wallet, cambiar el Skip por "Later". Si se da a "Later" entonces
debería salir un warning "Recovery Phrase Verification Pending"



Wallet (abandon testnet ) en web es inusable por unos pocos segundos cuando se abre.
Hay algun cálculo lentísimo que bloquea el input.


Investigate the notEnoughFunds calculated - looks too high!
The notEnoughFunds text sucks. Also does not use the Freeze wording

The initial search of funds should have a blinking hidden Amount and Vault Amount
when importing in the Header. It shows zero when importing abandon which is not
correct and user may be mislead.

Si tras crear un vvault cambio de Screen yo muy rapido y se ha metido el backup
u entonces cambio de screen antes de aceptar todo, por tanto se saca de backup
y se da por hecho que es válido aunque no haya habido push.


xq notEnoughFunds es tan alto haciendo un vault q deje poco dinero?

  Dont use Vault Amount .> But "Amount to Freeze"


Joder, si importo abandon abandon, entonces solo me usa la cuenta co de segwit.
	-> Esto está mal, cuando se haga import entonces tendré que tener todas o dejar
elegir a la persona cual usar...

A ver tengo un lio. Si estoy en Una wallet e importo por ejemplo abandon abandon
en testnet, eso me puede llevar minutps, pero puedo salir de esa wallet y crar una nueva
entonces que va a pasaer cuando vuelva... en que wallet se meterá todo eso. Supongo q en la correcta no?

TODO: implementar getReceiveDescriptor parecido a Change que buscará en las AccountNames y dará la mas moderna y nueva

Tener en Storage esto también:
  -Tags (per tx, también se puede usar para tagear "Vaulted")

Problema con getHistory ya q las txs no confirmadas me salen las primeras (como si fiuesen
las mas viejas) ya que blockHeight es cero. Cuando las ordene será un follón


Publicar update the explorer y actualizar este
Publucar update the discovery y actualizar este

Me ha salido esto en iOS:
 ERROR  RangeError: Property storage exceeds 196607 properties

After Vaulting it doeds not proceed to main page. Also it should auto-sync after vaulting
Also the Header should reflect some (unconfifmed) status.

Make it fast going to all screens. whats going on after craeting a vault for example or after creating an Emergency Address and then vaulting...

important that CrateColdAddress the height does not change (in web, or it will be not properly
centered=??

El centrado de titulos en headerMini es incorrecto en web?

The styling of the We need your permission is very ugly. slate? Also align the buttons Cancel & Grant CAmera Access using customButtons

Android expo-camera does not work!

Test cam on Android and on iOS/Android real devices


Make use of headerMini in all Bip39 stuff...



Finosh the Create in AddressInput
  -> Add a flag to indicet if Create is allowed (not used in SendBitcoin)
    -> In case of SendBitcoin, replace the "Create" with "Paste"?


Missing helper texts in Vault SetUp...
  -> Learn more about Vaults
  -> Emergency Address
  -> Theft Protection Timelock?  (may be the same heklp as Learm More about vaults)

The days chooset in Vault SetUp should show a popup. Also, when choosing "blocks" render blocks in status...
The Theft-Protection Time-Lock should use the flag naturalFormatting = true
when using "days"

WalletHeader should say if its Testnet, Storm or Regtest (when its test wallet)

cuando en la wallet doy a goBack tarda años

fact, since i need to express if this is firstOpen
-> BETTER simply do this on ALL new wallets (newSigners) on regtest or storm and that's it.
  ->Then context, when sync must also Toast "new tx received when a new tx is got..."???
  -> PROBLEM!!! Needs to wait 10 seconds which makes it confussing so i need
  to show some message on the Header




Wallet 3 falla en android
  -> Es una wallet tipo securestore pero no me pide el dedo
    -> Quizá es porque cancelé el dedo en primer lugar con anterioridad y no lo vuelve a pedir?

Wallet 5 falla en android

When I vault a certain amount, do i want to make it so that this is the vaultedAmount
before fees or after fees (service and miner)?
  -> Now, the way it works is your vaulted amount will be: Amount - seviceFee and you will
  have spent minerFees

This is bad (at least in presentation). The user probably wants to vault 1BTC and will
end up vaulting less than 1 BTC. This is bad user experience.
  -> Then, after triggering they will have even less, but we don't care about this, right?

ALL FUNDS (en verde)

Android Wallet 3 (walletId:2) does not load : Maybe fixed in commit c880356d86db8e15bb748ce374ededfe1a4af0ee
  -> Biometric + Signers Encryption none
    -> Does not request touchId

Las fees ahora me estan dando Express Confirmation con fees bajas y luego 
para fees altas 50 minutos !?!?!?!
  -> Wallet 7 Android
  -> Es posible que useFeeEstimates esté mal!!!
    -> Además creo que me está dando los de mainnet para testnet ?!!??!
      -> Lo que está mal es el estimador de esplora:
        -> Hacer un corrector de fees a lo mas restrictivo. La fee para un tiempo de bloque N no puede ser menor que la fee para otro tiempo de bloque M, donde M > N
        
1 : 74.073 2 : 74.073 3 : 55.37199999999999 4 : 47 5 : 47 6 : 55.37 7 : 55.37 8 : 47 9 : 47 10 : 47 11 : 47 12 : 47 13 : 47 14 : 47 15 : 47 16 : 47 17 : 47 18 : 47 19 : 47 20 : 47 21 : 47 22 : 47 23 : 47 24 : 47 25 : 47 144 : 3.2620000000000005 504 : 3.2620000000000005 1008 : 3.2620000000000005

Cuanto tengo muchas wallets entonces el boton de Add New molesta
Pero no puedo poner un paddingTop grande porque si tengo pocas wallets me queda descompensado

he puesto cardStyle: flex:1 para web, para que los headers no desaparezcan en scroll
el problema es que entonces la barra de navegador no se hace collapsible. Entonces pensar
que hacer...

Usar V$ o V€ cuando represente != mainnet

En Web la botonera Receive+Send+Freeze no queda bien centrada con los Vaults

En web el collapsible header no se vuelve a hacer grande

En ReactNativeWeb puedo clicar los botons (por ejemplo) de goBack mientras tengo el Modal
abierto. Ojo!

Lots of more error handling to be on WalletContext

Botonera sale mal, se puede reprpducir haciendo camvios rapidos Wallet 2-Wallet 3 en iphpne

Mejor poner un botón explícito de logOff

The padding bottom for Wallets and WalletHome should be larger thatn the
position of the buttons on the bottom

el handleVault no debería aparecer dependiendo de utxos length, lo mismo para receive
puede ser q tenga algo de utxos pero no pueda fabricar una tx.


cssInterop no funciona bien en Web!!! los fontSize pasa de ellos - quitar toda referencia a cssInterop
  -> Ademas advancd options, el icono de swap entre real y test no esta bien alineado verticalmente

Test password + secure store
test idb + password
tst idb + derived seed (encrypt app data)

Test como se ve la App con dark mode activado !!!
  https://stackoverflow.com/questions/57175226/how-to-disable-night-mode-in-my-application-even-if-night-mode-is-enable-in-andr/64339016#64339016

IMPORTANT!!!
The Password when is re-prompted should show a "Bad Password" or something
  -> Además debe de borrarme el texto antiguo? wuizas no

No me refrescha wallet 3 (goat oak)

I WalletContext I need to keep track of all the storage synchd status
and render a Loading... when not all of them are synched.
This will also let me get the derived cipher key from the signers so that i can
access the encrypted data

In App.tsx I can create versions of all components in Routes using useCallback

The getSeedDerivedCipherKey, i'm not sure its a great idea to have one different
cipher key per path, because when dealing with HWW this will force lots of
HWW clicks
  -> In fact it's just fine to have a unique vaultId but the cipherKey is
  the same for all the vaults for the same signer

The BTC rate is called too much. I beliueve everytime i set a wallet i create new queries
  -> In any way i should not rely on coingecko

Test-
  Wroing password
  User desenrolls FaceId (changes FaceId - does not work biometric anymore for different id)


Los collores de los textos "Test Wallet No Real _BValue" tienen backgroudna aleatorio??

BTC rates from thunderden (no coingecko)
dont use policy compiler

Cloudflare captcha:
https://dev.to/ryabinin/protect-your-react-native-application-using-cloudflare-turnstile-4l4l

Testnet testing wallet with funds: (deprecated/testingWallet.ts)
              'goat oak pull seek know resemble hurt pistol head first board better'



Immediate things to fix:

  Mas Padding a los USD , days
  
  Test web + android
  
  Si pongo directamente un valor mayor del posible en el Input de Vault Amount entonce TAMBUEN me sale el error de demasiadas Fees, lo cual es un lio!
    -> Lo he desactivado por el momento por ese motivo
  
  Esto lo tengo que tratar más arriba. Si los valores no son posible entonces mostrar por pantalla que no es posible directamente. antes de mostrar el cuadro de sliders.
          {maxVaultAmount !== undefined &&
            largestMinVaultAmount !== undefined &&
            maxVaultAmount >= largestMinVaultAmount && (
  
  En el mode rotator de USD , etc. mejor mostrar un Modal que me deje elegir entre todo lo que hay
  
  Simplificar y mucho los stles de SetUpVaultScreen cuando haya acabado
  
  
  Mover el ALL FIUNDS arriba y las unidades abajo
  Las bolitas del slider no son azules ahora
  Al hacer slide en el Slider (si tengo keyb abierto) poner el cursor a la derecha del todo
  Si me sale un error
  May never confirm en NARANJA - Si se elige mostrar warning Modal


-----
TODO: There is an issue. If the user selects locale es-ES but uses 
en-US in the system, then the keyboard for the numbers (the fee rate) will not
let use "," (commas) as decimal separator.
  SOLUTION: Do not let the user pick a locale and use the system one

TODO: Document the new APIs for storage
TODO: Add a default:       contentInsetAdjustmentBehavior="automatic"
      -> But on Android this wont work. Perhaps better use useHeaderHeight:
      https://reactnavigation.org/docs/7.x/native-stack-navigator/#headertransparent
TODO: I'll need a way to download from server / user storage backuped Vaults.
Note that these backuped vaults may be need to be merged (not replaced) with the
user current ones.
TODO: when the Wallets are presented so that you can pick one, if they are password
protected, then provide a Button "Forgot password"
TODO: when using SECURESTORAGE data can be removed any time! Thus, we need to provide
ways to recover from this.
  I need need to implement what to do if the user changes his biometrics.
  Note that in that case, then data stored securely cannot be accessed anymore.
  I will need a way to provide a way to detect that this data is missing (the SIGNERS for that wallet) and provide a way to
  allow re-entering a seed and reassociate it with the seed with the wallet id.
  This is for future releases?
  Read more in storage.ts

TODO: What happens if the user cannot recover from SecureStorage???
  -> Then he can still access the rest of data except 
TODO: When moving the slider then focus to the end of the textinput
TODO: In the slider set MAX when going to the MAX
TODO: in app.json i still need to set 
      "infoPlist": { "NSFaceIDUsageDescription": "TODO" },
      This is the string shown in the app when trying to use FaceId for the SecureStorage
      A good text needs to be there in mutiuple languages. but how


TODO: make it so that useSorage can pass initial object. Then its set as a useRef and after inital sync it stores the ref if did not exist yet? HOwever only set both isSycnd & new value state after it has been correctly stored in storage.
TODO: separate app-speciffic transalations from common and refactor code
TODO: separate app-speciffic styleds from common and refactor code
TODO: Replace all memoize calls (specially Factories) with moize
TODO: Wallets should have now the Create New Wallet functionality. Also the "Select Wallet".
TODO: Wallets is automatically generating Wallet 0 if no wallets exist. Remove this before shipping.
TODO: extremelly important, before sharing this module make sure
  this works properly: react-native-get-random-values
  See: https://www.reddit.com/r/Bitcoin/comments/37oxow/the_security_issue_of_blockchaininfos_android/
TODO: All Screens should use <ScrollView> with same options. Also default headers amke use of useAreaInsets fine, however, in those screens without defauklt header or bottom tabs that support insets, we must set them!
  -> https://reactnavigation.org/docs/handling-safe-area/




  -----

FIXED?!?!
      TODO: Me ha cascado el ultimo try-catch pero antes de crear siquiera la wallet,
      en el VaultSetUp ya casca!!!
      -> Me refiero a 
            `maxVaultAmountWhenMaxFee (${maxVaultAmountWhenMaxFee.vaultedAmount}) should never be larger than maxVaultAmount (${maxVaultAmount.vaultedAmount}), feeRate=${feeRate}, maxFeeRate: ${maxFeeRate}`
            Pero es que feeRafe=3.64 y maxFeeRate es 3.13!!!! como es posible q max suoerior a feeRate???
  TODO: iOS a veces el refresh se queda atontao
    -> Esto pasa si esta haciendo refresh, entonces me voy a una nueva screen y vuelvo
     y sigue haciendo refresh. Puede pasar cuando la red esta lenta. Entonces debería
     desmontar y remontar el compo? Se puede probar desconectando la wifi y dando a refresh.
     Puede pasar tambien supongo si se inicia un refresh automatico de eso de cada minuto
     entonces al vovler anda haciendo el regresh...
    -> https://www.reddit.com/r/reactnative/comments/x7ygwg/flatlist_refresh_indicator_freeze/
    -> Possible work around re-render? turn it off after a few milliseconds after refresh if its
    not refreshing and mount it back again?

